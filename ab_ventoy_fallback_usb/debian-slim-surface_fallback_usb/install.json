{
  "meta": {
    "name": "Debian Slim Surface Recovery",
    "version": "1.0",
    "target": "Surface Pro 8",
    "debian": "bookworm (12)"
  },
  "users": {
    "diego": {
      "shell": "/usr/bin/fish",
      "groups": ["sudo", "video", "input"],
      "sudo": "NOPASSWD"
    }
  },
  "repos": {
    "linux-surface": {
      "name": "linux-surface",
      "url": "https://pkg.surfacelinux.com/debian",
      "suite": "release",
      "component": "main",
      "key_url": "https://raw.githubusercontent.com/linux-surface/linux-surface/master/pkg/keys/surface.asc"
    }
  },
  "apt": {
    "surface": ["linux-image-surface", "linux-headers-surface", "iptsd", "libwacom-surface"],
    "base": ["systemd-sysv", "dbus", "locales", "console-setup"],
    "shells": ["bash", "zsh", "fish"],
    "editors": ["vim", "nano"],
    "network": ["network-manager", "wpasupplicant", "openssh-client", "openssh-server", "curl", "wget", "git", "iwd"],
    "graphics": ["xorg", "openbox", "xterm", "mesa-utils", "fonts-dejavu"],
    "browsers": ["lynx"],
    "monitors": ["btop", "htop"],
    "dev": ["nodejs", "npm", "python3", "python3-pip"],
    "utils": ["sudo", "grub-efi-amd64", "efibootmgr", "dosfstools", "e2fsprogs", "cryptsetup", "btrfs-progs", "parted"],
    "cli_tools": ["ripgrep", "fd-find", "fzf", "jq", "tmux", "neofetch"],
    "gui_apps": ["pcmanfm", "lxappearance"]
  },
  "npm": {
    "global": ["@anthropic-ai/claude-code"]
  },
  "services": {
    "enable": ["NetworkManager", "ssh", "iptsd"]
  },
  "mounts": {
    "luks_pool": {
      "device": "UUID=3c75c6db-4d7c-4570-81f1-02d168781aac",
      "luks_name": "pool",
      "mountpoint": "/mnt/pool",
      "fstype": "btrfs",
      "options": "defaults,noauto,compress=zstd"
    },
    "kubuntu": {
      "device": "UUID=7e3626ac-ce13-4adc-84e2-1a843d7e2793",
      "mountpoint": "/mnt/kubuntu",
      "fstype": "ext4",
      "options": "defaults,noauto"
    }
  },
  "install_order": [
    "1. Boot Debian netinst or debootstrap minimal",
    "2. Add linux-surface repo",
    "3. Install linux-image-surface + iptsd",
    "4. Reboot - verify keyboard works",
    "5. Run install.sh for remaining tools"
  ],
  "openbox": {
    "menu": [
      {"label": "Terminal", "cmd": "xterm"},
      {"label": "Files", "cmd": "pcmanfm"},
      {"type": "separator"},
      {"label": "AI Tools", "submenu": [
        {"label": "Claude Code", "cmd": "xterm -e claude"}
      ]},
      {"label": "System", "submenu": [
        {"label": "btop", "cmd": "xterm -e btop"},
        {"label": "WiFi", "cmd": "xterm -e nmtui"},
        {"label": "Unlock LUKS", "cmd": "xterm -e 'sudo cryptsetup open /dev/nvme0n1p4 pool && sudo mount /dev/mapper/pool /mnt/pool'"}
      ]},
      {"type": "separator"},
      {"label": "Exit", "action": "Exit"}
    ]
  }
}

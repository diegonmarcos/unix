# Ventoy Custom GRUB Menu
# Provides toram vs normal boot options for each OS

set timeout=10
set default=0

# ============================================================
# DEBIAN SURFACE
# ============================================================

menuentry "Debian Surface - Load to RAM (~800MB)" --class debian {
    set iso_path="/debian-surface-live.iso"
    loopback loop $vtoy_iso_part$iso_path
    linux (loop)/live/vmlinuz boot=live toram quiet splash
    initrd (loop)/live/initrd.img
}

menuentry "Debian Surface - Normal Boot (keeps USB mounted)" --class debian {
    set iso_path="/debian-surface-live.iso"
    loopback loop $vtoy_iso_part$iso_path
    linux (loop)/live/vmlinuz boot=live quiet splash
    initrd (loop)/live/initrd.img
}

# ============================================================
# ARCH SURFACE
# ============================================================

menuentry "Arch Surface - Load to RAM (~1.2GB)" --class arch {
    set iso_path="/arch-surface-live.iso"
    loopback loop $vtoy_iso_part$iso_path
    linux (loop)/arch/boot/x86_64/vmlinuz-linux-surface archisobasedir=arch archisolabel=ARCH_SURFACE copytoram=y quiet
    initrd (loop)/arch/boot/x86_64/initramfs-linux-surface.img
}

menuentry "Arch Surface - Normal Boot (keeps USB mounted)" --class arch {
    set iso_path="/arch-surface-live.iso"
    loopback loop $vtoy_iso_part$iso_path
    linux (loop)/arch/boot/x86_64/vmlinuz-linux-surface archisobasedir=arch archisolabel=ARCH_SURFACE quiet
    initrd (loop)/arch/boot/x86_64/initramfs-linux-surface.img
}

# ============================================================
# ALPINE MINIMAL
# ============================================================

menuentry "Alpine Minimal - Load to RAM (~400MB)" --class alpine {
    set iso_path="/alpine-live.iso"
    loopback loop $vtoy_iso_part$iso_path
    linux (loop)/boot/vmlinuz-lts modloop=/boot/modloop-lts modules=loop,squashfs,sd-mod,usb-storage quiet
    initrd (loop)/boot/initramfs-lts
}

menuentry "Alpine Minimal - Normal Boot (keeps USB mounted)" --class alpine {
    set iso_path="/alpine-live.iso"
    loopback loop $vtoy_iso_part$iso_path
    linux (loop)/boot/vmlinuz-lts modloop=/boot/modloop-lts modules=loop,squashfs,sd-mod,usb-storage quiet
    initrd (loop)/boot/initramfs-lts
}

# ============================================================
# UTILITIES
# ============================================================

menuentry "─────────────────────────────────" {
    true
}

menuentry "Boot from local disk" --class hdd {
    exit
}

menuentry "Reboot" --class reboot {
    reboot
}

menuentry "Shutdown" --class shutdown {
    halt
}
